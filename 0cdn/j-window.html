<style>.noscroll{overflow:hidden}.hidden{display:none}.ui-window-container{width:100%;position:fixed;left:0;top:0;bottom:0;right:0;background-color:rgba(230,233,237,0.8);z-index:5;overflow:none;transform-style:preserve-3d;-webkit-transform-style:preserve-3d;-moz-transform-style:preserve-3d;-ms-transform-style:preserve-3d;height:100%}.ui-window{background-color:white;margin:0 auto 30px;transform:scale(0.8);-webkit-transform:scale(0.8);-moz-transform:scale(0.8);-ms-transform:scale(0.8);transition:all 0.2s;-webkit-transition:all 0.2s;-moz-transition:all 0.2s;-ms-transition:all 0.2s;opacity:0;filter:alpha(opacity=0)}.ui-window-header{height:60px}.ui-window-body{overflow-scrolling:touch;-webkit-overflow-scrolling:touch;-moz-overflow-scrolling:touch;-ms-overflow-scrolling:touch;overflow-y:auto}.ui-window-animate{transform:scale(1);-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);opacity:1;filter:alpha(opacity=100)}.ui-window-title{padding:18px 20px;font-size:16px;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;color:black;background-color:white;border-bottom:1px solid #F0F0F0;position:absolute;left:0;right:0;top:0;height:60px}.ui-window-title .ui-window-button-close{float:right;cursor:pointer;font-size:18px;transition:all 0.2s;-webkit-transition:all 0.2s;-moz-transition:all 0.2s;-ms-transition:all 0.2s;background:none;border:0;outline:0;height:auto;color:red;text-align:right !important;padding:0;width:auto}.ui-window-title .ui-window-button-close:hover{transform:rotate(-90deg);-webkit-transform:rotate(-90deg);-moz-transform:rotate(-90deg);-ms-transform:rotate(-90deg)}.ui-window-title > span{font-weight:bold}.ui-window-title > .fa{margin-right:7px}</style>
<script>COMPONENT('window',function(self,config){var W=window;var header=null;if(!W.$$window){W.$$window_level=W.$$window_level||1;W.$$window=true;$(document).on('click','.ui-window-button-close',function(){SET($(this).attr('data-path'),'')});$(window).on('resize',function(){SETTER('window','resize')})}self.readonly();self.hide=function(){self.set('')};self.resize=function(){var el=self.element.find('.ui-window-body');el.height($(window).height()-self.find('.ui-window-header').height())};self.make=function(){var icon;if(config.icon)icon='<i class="fa fa-{0}"></i>'.format(config.icon);else icon='<i></i>';$(document.body).append('<div id="{0}" class="hidden ui-window-container"><div class="ui-window"><div class="ui-window-title"><button class="ui-window-button-close{5}" data-path="{2}"><i class="fa fa-times"></i></button>{4}<span>{3}</span></div><div class="ui-window-header"></div><div class="ui-window-body"></div></div>'.format(self._id,config.width||800,self.path,config.title,icon,config.closebutton==false?' hidden':''));var el= $('#'+self._id);el.find('.ui-window-body').get(0).appendChild(self.element.get(0));self.rclass('hidden');self.replace(el);header=self.virtualize({title:'.ui-window-title > span',icon:'.ui-window-title > i'});self.find('button').on('click',function(){switch(this.name){case'cancel':self.hide();break}})};self.configure=function(key,value,init,prev){if(init)return;switch(key){case'icon':header.icon.rclass(header.icon.attr('class'));value&&header.icon.aclass('fa fa-'+value);break;case'title':header.title.html(value);break;case'closebutton':self.find('.ui-window-button-close').tclass(value!==true);break}};self.setter=function(value){setTimeout2('noscroll',function(){$('html').tclass('noscroll',!!$('.ui-window-container').not('.hidden').length)},50);var isHidden=value!==config.if;if(self.hclass('hidden')===isHidden)return;setTimeout2('windowreflow',function(){EMIT('reflow',self.name)},10);if(isHidden){self.aclass('hidden');self.release(true);self.find('.ui-window').rclass('ui-window-animate');W.$$window_level--;return}if(W.$$window_level<1)W.$$window_level=1;W.$$window_level++;self.css('z-index',W.$$window_level*10);self.element.scrollTop(0);self.rclass('hidden');self.release(false);self.resize();config.reload&&EXEC(config.reload,self);config.default&&DEFAULT(config.default,true);if(!isMOBILE&&config.autofocus){var el=self.find(config.autofocus===true?'input[type="text"],select,textarea':config.autofocus);el.length&&el.eq(0).focus()}setTimeout(function(){self.element.scrollTop(0);self.find('.ui-window').aclass('ui-window-animate')},300);setTimeout2(self.id,function(){self.css('z-index',(W.$$window_level*10)+1)},1000)}});</script>