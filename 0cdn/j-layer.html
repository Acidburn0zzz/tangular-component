<style>*{box-sizing:border-box;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;-ms-box-sizing:border-box;font-size:14px}.noscroll{overflow:hidden}.hidden{display:none}.ui-layer{position:fixed;right:-60px;top:0;height:100%;box-shadow:-10px 10px 20px rgba(0,0,0,0.1);transition:all 0.3s;-webkit-transition:all 0.3s;-moz-transition:all 0.3s;-ms-transition:all 0.3s;opacity:0;filter:alpha(opacity=0);background-color:white}.ui-layer-toolbar{height:55px;border-bottom:1px solid #E0E0E0}.ui-layer-toolbar-back{border-right:1px solid #E0E0E0;float:left}.ui-layer-toolbar-back button{height:54px;border:0;background-color:white;cursor:pointer;width:65px;transition:background 0.3s;-webkit-transition:background 0.3s;-moz-transition:background 0.3s;-ms-transition:background 0.3s;outline:0;color:red;font-size:16px}.ui-layer-toolbar-back button:hover{background-color:#E0E0E0}.ui-layer-toolbar-caption{font-size:18px;font-weight:bold;float:left;margin:15px 0 0 20px;color:black}.ui-layer-visible{right:0;opacity:1;filter:alpha(opacity=100)}.ui-layer-body{overflow-x:hidden;overflow-y:auto}</style>
<script>COMPONENT('layer','offset:65;container:.ui-layer-body',function(self,config){var visible=false,csspos={},W=window;if(!W.$$layer){W.$$layer_level=W.$$layer_level||1;W.$$layer=true;$(W).on('resize',function(){setTimeout2('layers',function(){var w=$(W).width();$('.ui-layer').each(function(){var el=$(this);el.css('width',(w-config.offset)-(config.offset*(+el.attr('data-index'))));el.component().resizecontent()})},100)})}self.readonly();self.make=function(){self.aclass('ui-layer');self.element.prepend('<div class="ui-layer-toolbar"><div class="ui-layer-toolbar-back"><button><i class="fa fa-times"></i></button></div><div class="ui-layer-toolbar-caption">{0}</div></div>'.format(config.title));$(document.body).append('<div id="{0}"></div>'.format(self._id));var el=$('#'+self._id);el.get(0).appendChild(self.element.get(0));self.rclass('hidden');self.replace(el.find('.ui-layer'));self.toolbar=VIRTUALIZE(self,{button:'.ui-layer-toolbar-back > button',title:'.ui-layer-toolbar-caption'});self.toolbar.button.event('click',self.hide);self.event('click',function(){var arr=self.get();var index=arr.indexOf(config.if);if(index!==-1&&index!==arr.length-1)self.set(arr.slice(0,index+1))})};self.configure=function(key,value,init){if(init)return;switch(key){case'title':self.toolbar.title.html(value);break}};self.hide=function(){var path=self.get();var index=path.indexOf(config.if);if(index!==-1){path.splice(index,1);self.refresh(true)}};self.$hide=function(){self.rclass('ui-layer-visible');self.aclass('hidden',500)};self.resizecontent=function(){var el=config.container?self.find(config.container):EMPTYARRAY;if(el.length){var h=$(W).height();h=h-self.find('.ui-layer-toolbar').innerHeight();el.css('height',h);config.resize&&EXEC(config.resize,h)}};self.setter=function(value){$('html').tclass('noscroll',value.length>0);var index=value.indexOf(config.if);if(index===-1){visible&&self.$hide();visible=false;return}var w=$(window).width();if(visible){csspos['z-index']=10+index;csspos.width=(w-config.offset)-(config.offset*index);self.attrd('index',index);self.css(csspos);setTimeout(self.resizecontent,100);return}visible=true;csspos['z-index']=10+index;csspos.width=(w-config.offset)-(config.offset*index);self.css(csspos);self.attrd('index',index);self.rclass('hidden');config.reload&&EXEC(config.reload);config.default&&DEFAULT(config.default,true);setTimeout(function(){self.aclass('ui-layer-visible');setTimeout(self.resizecontent,100)},200)}});</script>