<style>.ui-dropdown-container *{box-sizing:border-box;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;-ms-box-sizing:border-box;font-size:14px}.ui-dropdown-values{position:relative;display:block;height:32px;text-align:left}.ui-dropdown{border:1px solid #E0E0E0;padding:0 5px 0 10px;border-radius:2px;outline:0;height:32px;overflow:hidden;float:left;width:100%;background-color:white;position:relative}.ui-dropdown:after{border-left:1px solid #E0E0E0;width:1px;position:absolute;height:30px;content:' ';margin-left:-23px}.ui-dropdown select{width:100%;outline:0;border:0;height:24px;background:white url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTc5MiIgaGVpZ2h0PSIxNzkyIiB2aWV3Qm94PSIwIDAgMTc5MiAxNzkyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik0xNDA4IDEwODhxMCAyNi0xOSA0NWwtNDQ4IDQ0OHEtMTkgMTktNDUgMTl0LTQ1LTE5bC00NDgtNDQ4cS0xOS0xOS0xOS00NXQxOS00NSA0NS0xOWg4OTZxMjYgMCA0NSAxOXQxOSA0NXptMC0zODRxMCAyNi0xOSA0NXQtNDUgMTloLTg5NnEtMjYgMC00NS0xOXQtMTktNDUgMTktNDVsNDQ4LTQ0OHExOS0xOSA0NS0xOXQ0NSAxOWw0NDggNDQ4cTE5IDE5IDE5IDQ1eiIgZmlsbD0iIzAwMCIvPjwvc3ZnPg==) no-repeat 100% 50%;background-size:14px;font-size:14px;float:left;cursor:pointer;padding:0;margin:3px 0 0 -4px;color:black;appearance:none;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none}.ui-dropdown-label{margin-bottom:5px;font-size:12px}.ui-dropdown-label .fa{width:14px}.ui-dropdown-label-required{font-weight:bold}.ui-dropdown-label-required:before{color:red;content:'***';margin-right:5px}.ui-dropdown-invalid{border-color:#E1A1A1 !important;background-color:#FFF3F3 !important}.ui-dropdown-invalid select{background-color:#FFF3F3 !important}.ui-dropdown-invalid:after{border-left-color:#E1A1A1 !important}.ui-disabled select{background-color:#F0F0F0;cursor:not-allowed;color:#A0A0A0}.ui-disabled .ui-dropdown{background-color:#F0F0F0;cursor:not-allowed}.ui-disabled .ui-dropdown .fa{color:#A0A0A0}</style>
<script>COMPONENT('dropdown',function(self,config){var select,container,condition,content=null,render='';self.validate=function(value){if(!config.required||config.disabled)return true;var type=typeof(value);if(type==='undefined'||type==='object')value='';else value=value.toString();EMIT('reflow',self.name);switch(self.type){case'currency':case'number':return value>0}return value.length>0};self.configure=function(key,value,init){if(init)return;var redraw=false;switch(key){case'type':self.type=value;break;case'items':if(value instanceof Array){self.bind('',value);return}var items=[];value.split(',').forEach(function(item){item=item.trim().split('|');var obj={id:item[1]==null?item[0]:item[1],name:item[0]};items.push(obj)});self.bind('',items);break;case'if':condition=value?FN(value):null;break;case'required':self.find('.ui-dropdown-label').tclass('ui-dropdown-label-required',value);self.state(1,1);break;case'datasource':self.datasource(value,self.bind);break;case'label':content=value;redraw=true;break;case'icon':redraw=true;break;case'disabled':self.tclass('ui-disabled',value);self.find('select').prop('disabled',value);break}redraw&&setTimeout2(self.id+'.redraw',100)};self.bind=function(path,arr){if(!arr)arr=EMPTYARRAY;var builder=[],value=self.get();var template='<option value="{0}"{1}>{2}</option>',propText=config.text||'name',propValue=config.value||'id';config.empty!==undefined&&builder.push('<option value="">{0}</option>'.format(config.empty));var type=typeof(arr[0]);var notObj=type==='string'||type==='number';for(var i=0,length=arr.length;i<length;i++){var item=arr[i];if(condition&&!condition(item))continue;if(notObj)builder.push(template.format(item,value===item?' selected="selected"':'',item));else builder.push(template.format(item[propValue],value===item[propValue]?' selected="selected"':'',item[propText]))}render=builder.join('');select.html(render)};self.redraw=function(){var html='<div class="ui-dropdown"><select data-jc-bind="">{0}</select></div>'.format(render);var builder=[],label=content||config.label;if(label){builder.push('<div class="ui-dropdown-label{0}">{1}{2}:</div>'.format(config.required?' ui-dropdown-label-required':'',config.icon?'<span class="fa fa-{0}"></span> '.format(config.icon):'',label));builder.push('<div class="ui-dropdown-values">{0}</div>'.format(html));self.html(builder.join(''))}else self.html(html).aclass('ui-dropdown-values');select=self.find('select');container=self.find('.ui-dropdown');render&&self.refresh();config.disabled&&self.reconfigure('disabled:true')};self.make=function(){self.type=config.type;content=self.html();self.aclass('ui-dropdown-container');self.redraw();config.if&&(condition=FN(config.if));config.items&&self.reconfigure({items:config.items});config.datasource&&self.reconfigure('datasource:'+config.datasource)};self.state=function(type){if(!type)return;var invalid=config.required?self.isInvalid():false;if(invalid===self.$oldstate)return;self.$oldstate=invalid;container.tclass('ui-dropdown-invalid',invalid)}});</script>