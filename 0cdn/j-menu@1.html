<style>.ui-menu{position:absolute;z-index:100;background-color:white;padding:5px 0;border-radius:3px;box-shadow:2px 5px 10px rgba(0,0,0,0.05);transition:0.2s all;-webkit-transition:0.2s all;-moz-transition:0.2s all;-ms-transition:0.2s all;transform:scale(0.3);-webkit-transform:scale(0.3);-moz-transform:scale(0.3);-ms-transform:scale(0.3);transform-origin:top left;-webkit-transform-origin:top left;-moz-transform-origin:top left;-ms-transform-origin:top left;opacity:0;filter:alpha(opacity=0);border:1px solid #E0E0E0}.ui-menu-visible{transform:scale(1);-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);opacity:1;filter:alpha(opacity=100)}.ui-menu ul{margin:0;padding:0}.ui-menu li{margin:0;padding:5px 30px 5px 5px;list-style-type:none;font-size:12px;cursor:pointer}.ui-menu li:hover{background-color:#F0F0F0}.ui-menu-nofa{padding-left:12px !important}.ui-menu i{width:30px;margin:0 5px 0 0;text-align:center;color:black}.ui-menu b{position:absolute;right:0;font-size:11px;color:gray;margin:1px 5px 0}.ui-menu-divider{padding:0 !important;background:transparent !important;cursor:default !important;color:gray;font-size:11px !important}.ui-menu-divider span{display:block;margin:5px 12px}.ui-menu-divider hr{margin:5px 0;border-color:#E0E0E0}.ui-dark .ui-menu b{color:#505050}.ui-dark .ui-menu{background-color:#303030;border-color:#353535;box-shadow:1px 5px 10px rgba(0,0,0,0.2)}.ui-dark .ui-menu i{color:white}.ui-dark .ui-menu li:hover{background-color:#202020}.ui-dark .ui-menu-divider hr{border-color:#404040}</style>
<script>COMPONENT('menu@1',function(self){self.singleton();self.readonly();self.nocompile&&self.nocompile();var cls='ui-menu',is=false,events={},ul;self.make=function(){self.aclass(cls+' hidden');self.append('<ul></ul>');ul=self.find('ul');self.event('touchstart mousedown','li',function(e){var el=$(this);if(el.hclass(cls+'-divider')){e.preventDefault();e.stopPropagation()}else{self.opt.callback(self.opt.items[el.index()]);self.hide()}});events.hide=function(){is&&self.hide()};self.event('scroll',events.hide);self.on('reflow',events.hide);self.on('scroll',events.hide);self.on('resize',events.hide);events.click=function(e){if(is&&(!self.target||(self.target!==e.target&&!self.target.contains(e.target))))self.hide()}};self.bindevents=function(){events.is=true;$(document).on('touchstart mousedown',events.click);$(window).on('scroll',events.hide)};self.unbindevents=function(){events.is=false;$(document).off('touchstart mousedown',events.click);$(window).off('scroll',events.hide)};self.showxy=function(x,y,items,callback){var opt={};opt.x=x;opt.y=y;opt.items=items;opt.callback=callback;self.show(opt)};self.show=function(opt){if(typeof(opt)==='string'){opt={align:opt};opt.element=arguments[1];opt.items=arguments[2];opt.callback=arguments[3];opt.offsetX=arguments[4];opt.offsetY=arguments[5]}var tmp=opt.element?opt.element instanceof jQuery?opt.element[0]:opt.element.element?opt.element.dom:opt.element:null;if(is&&tmp&&self.target===tmp){self.hide();return}var builder=[];self.target=tmp;self.opt=opt;for(var i=0;i<opt.items.length;i++){var item=opt.items[i];builder.push(typeof(item)=='string'?'<li class="{1}-divider">{0}</li>'.format(item==='-'?'<hr />':('<span>'+item+'</span>'),cls):'<li{2}>{3}{0}{1}</li>'.format(item.icon?'<i class="{0}"></i>'.format(item.icon.charAt(0)==='!'?item.icon.substring(1):('fa fa-'+item.icon)):'',item.name,item.icon?'':(' class="'+cls+'-nofa"'),item.shortcut?'<b>{0}</b>'.format(item.shortcut):''))}var css={};ul.html(builder.join(''));if(is){css.left=0;css.top=0;self.element.css(css)}else{self.rclass('hidden');self.aclass(cls+'-visible',100);is=true;if(!events.is)self.bindevents()}var target=$(opt.element);var w=self.width();var offset=target.offset();if(opt.element){switch(opt.align){case'center':css.left=Math.ceil((offset.left-w/2)+(target.innerWidth()/2));break;case'right':css.left=(offset.left-w)+target.innerWidth();break;default:css.left=offset.left;break}css.top=opt.position==='bottom'?(offset.top-self.element.height()-10):(offset.top+target.innerHeight()+10)}else{css.left=opt.x;css.top=opt.y}if(opt.offsetX)css.left+=opt.offsetX;if(opt.offsetY)css.top+=opt.offsetY;self.element.css(css)};self.hide=function(){events.is&&self.unbindevents();is=false;self.opt&&self.opt.hide&&self.opt.hide();self.target=null;self.opt=null;self.aclass('hidden');self.rclass(cls+'-visible')}});</script>