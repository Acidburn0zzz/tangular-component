<style>.ui-dynamicvaluelist-label{margin-bottom:3px;font-size:12px;text-align:left}.ui-dynamicvaluelist-required:before{color:red;content:'***';margin-right:5px}.ui-dynamicvaluelist-label i{margin-right:5px}.ui-dynamicvaluelist-items{}.ui-dynamicvaluelist-items > div:first-child{border-radius:2px 2px 0 0}.ui-dynamicvaluelist-item{line-height:32px;background-color:white;border:1px solid #E0E0E0;border-bottom:0}.ui-dynamicvaluelist-remove{float:right;width:32px;text-align:center;color:#DA4453;font-size:14px;border-left:1px solid #E0E0E0;cursor:pointer;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}.ui-dynamicvaluelist-remove:hover{opacity:0.7;filter:alpha(opacity=70)}.ui-dynamicvaluelist-value{padding-left:10px;margin-right:32px;cursor:pointer}.ui-dynamicvaluelist-container > div:first-child{border-radius:2px 2px 0 0}.ui-dynamicvaluelist-input{border-radius:0 0 2px 2px;border-bottom:1px solid #E0E0E0;color:#737373}.ui-dynamicvaluelist-empty .ui-dynamicvaluelist-input{border-radius:2px}.ui-dynamicvaluelist-invalid .ui-dynamicvaluelist-item, .ui-dynamicvaluelist-invalid .ui-dynamicvaluelist-input{border-color:red}.ui-disabled.ui-dynamicvaluelist *{cursor:not-allowed}.ui-disabled .ui-dynamicvaluelist-remove{display:none}.ui-disabled .ui-dynamicvaluelist-item, .ui-disabled .ui-dynamicvaluelist-input{background-color:#F0F0F0}.ui-disabled .ui-dynamicvaluelist-value{color:#8c8c8c}.ui-dark .ui-dynamicvaluelist-required:before{color:red}.ui-dark .ui-dynamicvaluelist-item{background-color:#202020;border-color:#3A3A3A}.ui-dark .ui-dynamicvaluelist-remove{color:#DA4453;border-left-color:#3A3A3A}.ui-dark .ui-dynamicvaluelist-input{border-bottom-color:#3A3A3A;color:#707070}.ui-dark .ui-dynamicvaluelist-invalid .ui-dynamicvaluelist-item, .ui-dark .ui-dynamicvaluelist-invalid .ui-dynamicvaluelist-input{border-color:red}.ui-dark .ui-disabled .ui-dynamicvaluelist-item, .ui-dark .ui-disabled .ui-dynamicvaluelist-input{background-color:#282828}.ui-dark .ui-disabled .ui-dynamicvaluelist-value{color:#dadada}.ui-dark .ui-disabled .ui-dynamicvaluelist-input .ui-dynamicvaluelist-value{color:#8c8c8c}</style>
<script>COMPONENT('dynamicvaluelist','value:name;placeholder:Click to change;after:\\:',function(self,config,cls){var cls2='.'+cls,container;self.readonly();self.nocompile();self.validate=function(value){return!config.required||config.disabled?true:!!(value&&value.length)};self.state=function(type){if(!type)return;var invalid=config.required?self.isInvalid():false;if(invalid===self.$oldstate)return;self.$oldstate=invalid;self.tclass(cls+'-invalid',invalid)};self.configure=function(key,value){switch(key){case'label':var label=self.find(cls2+'-label');label.tclass('hidden',!value);label.find('span').html((value||'')+':');break;case'required':self.noValid(!value);!value&&self.state(1,1);var el=self.find(cls2+'-label');if(value)el.aclass(cls+'-required');else el.rclass(cls+'-required');break;case'disabled':self.tclass('ui-disabled',value);break;case'icon':var fa=self.find(cls2+'-label').find('i');fa.rclass2('fa-').rclass('hidden');if(value)fa.aclass('fa-'+value);else fa.aclass('hidden');break;case'remap':config.remap=value?FN(value):null;break}};self.make=function(){if(!config.label)config.label=self.html();var icon='';if(config.icon)icon='<i class="{0}"></i>'.format(config.icon.indexOf(' ')===-1?('fa fa-'+config.icon):config.icon);self.aclass(cls);self.aclass(cls+'-empty');self.html('<div class="{0}-label">{1}{2}{3}</div><div class="{0}-container"></div><div class="{0}-item {0}-input"><div class="{0}-value">{4}</div></div>'.format(cls,icon,config.label,config.after||'',config.placeholder));container=self.find(cls2+'-container');self.event('click',cls2+'-value',function(e){var parent=$(this).parent();var index=parent.attrd('index');if(config.disabled||parent.hclass(cls+'-input'))return;self.bind(parent,index)});self.event('click',cls2+'-input',function(e){if(config.disabled)return;var data=self.get();var index=(data||[]).length;var el=$(this);self.bind(el,index)});self.event('click',cls2+'-remove',function(e){if(config.disabled)return;var data=self.get();var parent=$(this).parent();var index=+parent.attrd('index');parent.remove();data.splice(index,1);self.set(data);self.change()})};self.bind=function(el,index){if(config.dirsource){var opt={};opt.element=el;opt.offsetY=-1;opt.placeholder=config.dirplaceholder;opt.render=config.dirrender?GET(self.makepath(config.dirrender)):null;opt.custom=!!config.dircustom;opt.offsetWidth=2;opt.minwidth=config.dirminwidth||200;opt.maxwidth=config.dirmaxwidth;opt.key=config.dirkey||config.key;opt.empty=config.dirempty;opt.key=config.dirkey;opt.items=function(value,next){EXEC(self.makepath(config.dirsource),value,next)};opt.callback=function(selected){var data=self.get();data[index]=selected;self.set(data);self.change();config.required&&setTimeout(self.validate2,100)};SETTER('directory','show',opt)}else{EXEC(self.makepath(config.click),el,function(value){var data=self.get();data[index]=value;self.set(data);self.change();config.required&&setTimeout(self.validate2,100)},self.get())}};self.bindvalue=function(values){if(!(values instanceof Array))values=[];var html='';for(var i=0;i<values.length;i++)Â {var value=values[i],val;config.bind&&SEEX(self.makepath(config.bind),value);val=(value instanceof Object?value[config.value]:value);if(config.remap)value=config.remap(value);html+='<div class="{0}-item" data-index="{1}"><div class="{0}-remove"><i class="fa fa-times"></i></div><div class="{0}-value">{2}</div></div>'.format(cls,i,val)}container.html(html);self.tclass(cls+'-empty',!values.length)};self.setter=function(value,path,type){if(!value){self.set([],0);return}if(value)EXEC(self.makepath(config.exec),value,self.bindvalue,type);else self.bindvalue(value)}});</script>